extends ../../layouts/default.pug 

block main 
    - if (messages.sucess)
      .message.info
        .alert.alert-secondary(role='alert' style='background-color:  rgb(112, 193, 112); ' time-out-alert)
            | #{messages.sucess} 
            button.btn-close(type='button', aria-label='Close' btn-close-alert) X
    .container.mt-4
      h3 Bộ Lọc
      .btn-group
        each item in ListBtnFilter
          Button.btn.btn-outline-secondary(btn-filter-status=item.status class=item.class) #{item.name}
      
      h3 Thay đổi nhiều sản phẩm
      .row
        .col-md-6
          form(action=`/admin/products/change-multi?_method=PATCH` method="POST", form-change-multi)
            .form-row.align-items-center
              .col-auto
                label.sr-only(for='selectOption') Select Option
                select#selectOption.form-control.mb-2(name='typeMulti')
                  option(value='') --- Lựa chọn thay đổi --- 
                  option(value='active-multi') Hoạt động 
                  option(value='inactive-multi') Không hoạt động 
                  option(value='change-position-multi') Thay đổi vị trí 
                  option(value="delete-multi") Xóa 
              // Search Input
              .col
                label.sr-only(for='searchInput') Search
                .input-group.mb-2
                  input#searchInput.form-control(type='text', placeholder='Search...' name='id').d-none
                  .input-group-append
                    button.btn.btn-primary(type='submit') Áp dụng 
        form(form-search-product)
          .col  
                label.sr-only(for='searchInput') Search
                .input-group.mb-2
                  input#searchInput.form-control(type='text', placeholder='Nhập thông tin tìm kiếm....' name='keyword')
                  .input-group-append
                    button(type='submit').btn.btn-outline-info Tìm kiếm       
    div(style='width: 100%; height: 2px; background-color: black;margin-top: 10px; margin-bottom: 15px;')
    .container.text-center
      .row
        .col
          h2  Danh Sách sản phẩm 
        .col
          a(href="").btn.btn-warning + Thêm mới  
        .col
          button.btn.btn-primary.position-relative(type='button')
            | Thùng rác
            span.position-absolute.top-0.start-100.translate-middle.badge.rounded-pill.bg-danger
              | 99+ 
        
      
    if product.length < 1 
      h1(style='color: red;').container Không có dữ liệu ! 
    else
      table.table.table-striped(change-multi)
        thead
          tr
            th 
              input(type="checkbox" name="checkall")
            th #
            th tiêu đề 
            th Giá tiền
            th % Giảm giá 
            th Sl tồn kho
            th Hình ảnh
            th Trạng thái
            th Vị trí 
            th Hành động
        tbody
          each item, index in product

            tr
              td
                input(type="checkbox" name="ids" value=item.id)
              td #{objectPagination.skip + index + 1}
              td #{item.title}
              td
                h6 #{item.price}
              td #{item.discountPercentage}
              td #{item.stock}
              td 
                img(src=item.thumbnail, alt="", style="width: 100px;")  
              if item.status == 'active'
                td 
                  Button.badge.rounded-pill.text-bg-success(style='background-color: green; color: white' btn-change-status=item.id) #{item.status}
              else
                td 
                  Button.badge.rounded-pill.text-bg-danger(style='background-color: red; color: white' btn-change-status=item.id) #{item.status}
              td 
                input(type="number", style="width: 40px;", value=item.position) 
              td 
                .btn-group
                  button.btn.btn-danger Sửa
                  button.btn.btn-warning Xóa 
                  button.btn.btn-info Chi tiết
    div(style='width: 100%; height: 2px; background-color: black;margin-top: 10px; margin-bottom: 15px;')
    .container.mt-5
      nav(aria-label='Page navigation')
        ul.pagination(style='justify-content: center;')
          li.page-item(class=`${objectPagination.pageCurrent > 1 ? "": "disabled"}`)
            Button.page-link(href='#' btn-pagination=objectPagination.pageCurrent - 1) Previous
          - for(let i = 1; i <= objectPagination.total; i++)
            li.page-item
              Button.btn.btn-outline-info(btn-pagination=i class=`${objectPagination.pageCurrent == i ? "btn-danger" : ""}`) #{i}
          
          li.page-item(class=`${objectPagination.pageCurrent < objectPagination.total ? "": "disabled"}`)
            Button.page-link(btn-pagination = objectPagination.pageCurrent + 1) Next 
    form(action="" form-change-status data-path=`/admin/products/change-status` method="POST") 